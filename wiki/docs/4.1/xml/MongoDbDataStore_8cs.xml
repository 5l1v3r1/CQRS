<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.16">
  <compounddef id="MongoDbDataStore_8cs" kind="file" language="C#">
    <compoundname>MongoDbDataStore.cs</compoundname>
    <innerclass refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore" prot="public">Cqrs::MongoDB::DataStores::MongoDbDataStore</innerclass>
    <innernamespace refid="namespaceCqrs">Cqrs</innernamespace>
    <innernamespace refid="namespaceCqrs_1_1MongoDB">Cqrs::MongoDB</innernamespace>
    <innernamespace refid="namespaceCqrs_1_1MongoDB_1_1DataStores">Cqrs::MongoDB::DataStores</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#region<sp/>Copyright</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">//<sp/>//<sp/>-----------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//<sp/>//<sp/>&lt;copyright<sp/>company=&quot;Chinchilla<sp/>Software<sp/>Limited&quot;&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">//<sp/>//<sp/><sp/><sp/>Copyright<sp/>Chinchilla<sp/>Software<sp/>Limited.<sp/>All<sp/>rights<sp/>reserved.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">//<sp/>//<sp/>&lt;/copyright&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">//<sp/>//<sp/>-----------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="namespaceSystem" kindref="compound">System</ref>;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="namespaceSystem" kindref="compound">System</ref>.Collections;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="namespaceSystem" kindref="compound">System</ref>.Collections.Generic;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="namespaceSystem" kindref="compound">System</ref>.<ref refid="namespaceSystem_1_1Linq" kindref="compound">Linq</ref>;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="namespaceSystem" kindref="compound">System</ref>.<ref refid="namespaceSystem_1_1Linq" kindref="compound">Linq</ref>.Expressions;</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="namespaceCqrs" kindref="compound">Cqrs</ref>.<ref refid="namespaceCqrs_1_1DataStores" kindref="compound">DataStores</ref>;</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Chinchilla.Logging;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>MongoDB.Driver;</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/><ref refid="namespaceCqrs" kindref="compound">Cqrs</ref>.<ref refid="namespaceCqrs_1_1Entities" kindref="compound">Entities</ref>;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespaceCqrs_1_1MongoDB_1_1DataStores" kindref="compound">Cqrs.MongoDB.DataStores</ref></highlight></codeline>
<codeline lineno="20"><highlight class="normal">{</highlight></codeline>
<codeline lineno="25" refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore" kindref="compound">MongoDbDataStore</ref>&lt;TData&gt;<sp/>:<sp/><ref refid="interfaceCqrs_1_1DataStores_1_1IDataStore" kindref="compound">IDataStore</ref>&lt;TData&gt;</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>where<sp/>TData<sp/>:<sp/><ref refid="classCqrs_1_1Entities_1_1Entity" kindref="compound">Entity</ref></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>IMongoCollection&lt;TData&gt;<sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref><sp/>{<sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal">;<sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal"><sp/>ILogger<sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref><sp/>{<sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal">;<sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal">;<sp/>}</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a039b75f6f011fa89b5dd724bee6b64cb_1a039b75f6f011fa89b5dd724bee6b64cb" kindref="member">MongoDbDataStore</ref>(ILogger<sp/>logger,<sp/>IMongoCollection&lt;TData&gt;<sp/>mongoCollection)</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref><sp/>=<sp/>logger;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref><sp/>=<sp/>mongoCollection;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MongoCollection.Database.RequestStart();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#region<sp/>Implementation<sp/>of<sp/>IEnumerable</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>IEnumerator&lt;TData&gt;<sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a2bab987d4d7f3c6b2ab3a3e04878cf98_1a2bab987d4d7f3c6b2ab3a3e04878cf98" kindref="member">GetEnumerator</ref>()</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.AsQueryable().GetEnumerator();</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IEnumerator<sp/>IEnumerable.GetEnumerator()</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a2bab987d4d7f3c6b2ab3a3e04878cf98_1a2bab987d4d7f3c6b2ab3a3e04878cf98" kindref="member">GetEnumerator</ref>();</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#region<sp/>Implementation<sp/>of<sp/>IQueryable</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_ade387c1d511dfad22ff7eb752fb842e5_1ade387c1d511dfad22ff7eb752fb842e5" kindref="member">Expression</ref><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_ade387c1d511dfad22ff7eb752fb842e5_1ade387c1d511dfad22ff7eb752fb842e5" kindref="member">Expression</ref></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.AsQueryable().Expression;<sp/>}</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Type<sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a54f5798a67d64a47e6acb15f378fb246_1a54f5798a67d64a47e6acb15f378fb246" kindref="member">ElementType</ref></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.AsQueryable().ElementType;<sp/>}</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>IQueryProvider<sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_ab08ce716944d76cbaef9a94fd1525440_1ab08ce716944d76cbaef9a94fd1525440" kindref="member">Provider</ref></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.AsQueryable().Provider;<sp/>}</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#region<sp/>Implementation<sp/>of<sp/>IDataStore&lt;TData&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_affcb1268469b99963501dd8c58e4a480_1affcb1268469b99963501dd8c58e4a480" kindref="member">Add</ref>(TData<sp/>data)</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Adding<sp/>data<sp/>to<sp/>the<sp/>Mongo<sp/>database&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Add&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DateTime<sp/>start<sp/>=<sp/>DateTime.Now;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.InsertOne(data);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DateTime<sp/>end<sp/>=<sp/>DateTime.Now;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">.Format(</highlight><highlight class="stringliteral">&quot;Adding<sp/>data<sp/>in<sp/>the<sp/>Mongo<sp/>database<sp/>took<sp/>{0}.&quot;</highlight><highlight class="normal">,<sp/>end<sp/>-<sp/>start),<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Add&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Adding<sp/>data<sp/>to<sp/>the<sp/>Mongo<sp/>database...<sp/>Done&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Add&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_affcb1268469b99963501dd8c58e4a480_1affcb1268469b99963501dd8c58e4a480" kindref="member">Add</ref>(IEnumerable&lt;TData&gt;<sp/>data)</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Adding<sp/>data<sp/>collection<sp/>to<sp/>the<sp/>Mongo<sp/>database&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Add&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.InsertMany(data);</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Adding<sp/>data<sp/>collection<sp/>to<sp/>the<sp/>Mongo<sp/>database...<sp/>Done&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Add&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a14b43546e8d1e1832358e1cf2f8535f1_1a14b43546e8d1e1832358e1cf2f8535f1" kindref="member">Remove</ref>(TData<sp/>data)</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Removing<sp/>data<sp/>from<sp/>the<sp/>Mongo<sp/>database&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Remove&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data.IsDeleted<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_af86a3df56e2df92fb9ef880ff4fa5f16_1af86a3df56e2df92fb9ef880ff4fa5f16" kindref="member">Update</ref>(data);</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Removing<sp/>data<sp/>from<sp/>the<sp/>Mongo<sp/>database...<sp/>Done&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Remove&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a4650c780f34e320ba39f312e3b04555d_1a4650c780f34e320ba39f312e3b04555d" kindref="member">Destroy</ref>(TData<sp/>data)</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Removing<sp/>data<sp/>from<sp/>the<sp/>Mongo<sp/>database&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Destroy&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DateTime<sp/>start<sp/>=<sp/>DateTime.Now;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.DeleteOne(x<sp/>=&gt;<sp/>x.Rsn<sp/>==<sp/>data.Rsn);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DateTime<sp/>end<sp/>=<sp/>DateTime.Now;</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">.Format(</highlight><highlight class="stringliteral">&quot;Updating<sp/>data<sp/>in<sp/>the<sp/>Mongo<sp/>database<sp/>took<sp/>{0}.&quot;</highlight><highlight class="normal">,<sp/>end<sp/>-<sp/>start),<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Update&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Removing<sp/>data<sp/>from<sp/>the<sp/>Mongo<sp/>database...<sp/>Done&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Destroy&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_ac0cb8626e8f8ab0275a31e88a920ee3e_1ac0cb8626e8f8ab0275a31e88a920ee3e" kindref="member">RemoveAll</ref>()</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Removing<sp/>all<sp/>from<sp/>the<sp/>Mongo<sp/>database&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\RemoveAll&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.DeleteMany(x<sp/>=&gt;<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Removing<sp/>all<sp/>from<sp/>the<sp/>Mongo<sp/>database...<sp/>Done&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\RemoveAll&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_af86a3df56e2df92fb9ef880ff4fa5f16_1af86a3df56e2df92fb9ef880ff4fa5f16" kindref="member">Update</ref>(TData<sp/>data)</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Updating<sp/>data<sp/>in<sp/>the<sp/>Mongo<sp/>database&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Update&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DateTime<sp/>start<sp/>=<sp/>DateTime.Now;</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.ReplaceOne(x<sp/>=&gt;<sp/>x.Rsn<sp/>==<sp/>data.Rsn,<sp/>data);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DateTime<sp/>end<sp/>=<sp/>DateTime.Now;</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">.Format(</highlight><highlight class="stringliteral">&quot;Updating<sp/>data<sp/>in<sp/>the<sp/>Mongo<sp/>database<sp/>took<sp/>{0}.&quot;</highlight><highlight class="normal">,<sp/>end<sp/>-<sp/>start),<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Update&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Updating<sp/>data<sp/>to<sp/>the<sp/>Mongo<sp/>database...<sp/>Done&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Update&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#region<sp/>Implementation<sp/>of<sp/>IDisposable</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a5003aba35b02f686cbacf5832a14cf46_1a5003aba35b02f686cbacf5832a14cf46" kindref="member">Dispose</ref>()</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>MongoCollection.Database.RequestDone();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endregion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a2fef1856a801d2f247ed5b0a0f3bea9a_1a2fef1856a801d2f247ed5b0a0f3bea9a" kindref="member">Repair</ref>()</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Repairing<sp/>the<sp/>Mongo<sp/>database&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Repair&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DateTime<sp/>start<sp/>=<sp/>DateTime.Now;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a116162a1c8e20706e99e850b0a9718cc_1a116162a1c8e20706e99e850b0a9718cc" kindref="member">MongoCollection</ref>.Database.RunCommand(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>JsonCommand&lt;object&gt;(</highlight><highlight class="stringliteral">&quot;{<sp/>repairDatabase:<sp/>1<sp/>}&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DateTime<sp/>end<sp/>=<sp/>DateTime.Now;</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal">.Format(</highlight><highlight class="stringliteral">&quot;Repairing<sp/>the<sp/>Mongo<sp/>database<sp/>took<sp/>{0}.&quot;</highlight><highlight class="normal">,<sp/>end<sp/>-<sp/>start),<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Repair&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classCqrs_1_1MongoDB_1_1DataStores_1_1MongoDbDataStore_a1258497689d7f866b2bc219cd8268b7d_1a1258497689d7f866b2bc219cd8268b7d" kindref="member">Logger</ref>.LogDebug(</highlight><highlight class="stringliteral">&quot;Repairing<sp/>the<sp/>Mongo<sp/>database...<sp/>Done&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;MongoDbDataStore\\Repair&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="254"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/opt/buildAgent/work/565751ca98ebc594/Framework/Cqrs.MongoDB/DataStores/MongoDbDataStore.cs"/>
  </compounddef>
</doxygen>
