<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="AkkaUnitTests_8cs" kind="file">
    <compoundname>AkkaUnitTests.cs</compoundname>
    <innerclass refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1AkkaUnitTests" prot="public">Cqrs::Akka::Tests::Unit::AkkaUnitTests</innerclass>
    <innernamespace refid="namespaceCqrs_1_1Akka_1_1Tests_1_1Unit">Cqrs::Akka::Tests::Unit</innernamespace>
    <innernamespace refid="namespaceSystem_1_1Threading">System::Threading</innernamespace>
    <innernamespace refid="namespacecdmdotnet_1_1Logging_1_1Configuration">cdmdotnet::Logging::Configuration</innernamespace>
    <innernamespace refid="namespacecdmdotnet_1_1StateManagement">cdmdotnet::StateManagement</innernamespace>
    <innernamespace refid="namespacecdmdotnet_1_1StateManagement_1_1Web">cdmdotnet::StateManagement::Web</innernamespace>
    <innernamespace refid="namespaceMicrosoft_1_1VisualStudio_1_1TestTools_1_1UnitTesting">Microsoft::VisualStudio::TestTools::UnitTesting</innernamespace>
    <innernamespace refid="namespaceNinject">Ninject</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">using</highlight><highlight class="normal"><sp/>System;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>System.Collections.Generic;</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>System.Threading;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>cdmdotnet.Logging;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>cdmdotnet.Logging.Configuration;</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>cdmdotnet.StateManagement;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>cdmdotnet.StateManagement.Web;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Akka.Commands;</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Akka.Domain;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Akka.Events;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Akka.Tests.Unit.Commands;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Akka.Tests.Unit.Commands.Handlers;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Akka.Tests.Unit.Events;</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Akka.Tests.Unit.Events.Handlers;</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Akka.Tests.Unit.Sagas;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Authentication;</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Bus;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Commands;</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Configuration;</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Domain;</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Domain.Factories;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Events;</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Ninject.Akka;</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Cqrs.Ninject.Configuration;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Microsoft.VisualStudio.TestTools.UnitTesting;</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="keyword">using</highlight><highlight class="normal"><sp/>Ninject;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">Cqrs.<ref refid="namespaceCqrs_1_1Messages_af06a7e6cd2609043d0f2f5f3419f81e3_1af06a7e6cd2609043d0f2f5f3419f81e3a1565c979ff6d5255fd3c81f57219fffc" kindref="member">Akka</ref>.Tests.Unit</highlight></codeline>
<codeline lineno="29"><highlight class="normal">{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/>[TestClass]</highlight></codeline>
<codeline lineno="31" refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1AkkaUnitTests" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1AkkaUnitTests" kindref="compound">AkkaUnitTests</ref></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">internal</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>IDictionary&lt;Guid,<sp/>bool&gt;<sp/>Step1Reached<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Dictionary&lt;Guid,<sp/>bool&gt;();</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">internal</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>IDictionary&lt;Guid,<sp/>bool&gt;<sp/>Step2Reached<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Dictionary&lt;Guid,<sp/>bool&gt;();</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">internal</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>IDictionary&lt;Guid,<sp/>bool&gt;<sp/>Step3Reached<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Dictionary&lt;Guid,<sp/>bool&gt;();</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">internal</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>IDictionary&lt;Guid,<sp/>bool&gt;<sp/>Step4Reached<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Dictionary&lt;Guid,<sp/>bool&gt;();</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">internal</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>IDictionary&lt;Guid,<sp/>bool&gt;<sp/>FinalCommandReached<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Dictionary&lt;Guid,<sp/>bool&gt;();</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[TestMethod]</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>SendingCommandsAndEvents_AcrossBusesInMultipleWays_AllWork()</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Arrange</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>command<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1SayHelloWorldCommand" kindref="compound">SayHelloWorldCommand</ref>();</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Guid<sp/>correlationId<sp/>=<sp/>Guid.NewGuid();</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ICorrelationIdHelper<sp/>correlationIdHelper<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>WebCorrelationIdHelper(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>WebContextItemCollectionFactory());</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>correlationIdHelper.SetCorrelationId(correlationId);</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ILogger<sp/>logger<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>ConsoleLogger(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>LoggerSettings(),<sp/>correlationIdHelper);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="interfaceCqrs_1_1Configuration_1_1IConfigurationManager" kindref="compound">IConfigurationManager</ref><sp/>configurationManager<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Configuration_1_1ConfigurationManager" kindref="compound">ConfigurationManager</ref>();</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="interfaceCqrs_1_1Bus_1_1IBusHelper" kindref="compound">IBusHelper</ref><sp/>busHelper<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Bus_1_1BusHelper" kindref="compound">BusHelper</ref>(configurationManager);</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>kernel<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>StandardKernel();</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;ILogger&gt;().ToConstant(logger);</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;<ref refid="interfaceCqrs_1_1Domain_1_1Factories_1_1IAggregateFactory" kindref="compound">IAggregateFactory</ref>&gt;().To&lt;AggregateFactory&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IUnitOfWork&lt;Guid&gt;&gt;().To&lt;UnitOfWork&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;ISagaUnitOfWork&lt;Guid&gt;&gt;().To&lt;SagaUnitOfWork&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IAggregateRepository&lt;Guid&gt;&gt;().To&lt;AkkaAggregateRepository&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IAkkaAggregateRepository&lt;Guid&gt;&gt;().To&lt;AkkaAggregateRepository&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;ISagaRepository&lt;Guid&gt;&gt;().To&lt;AkkaSagaRepository&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IAkkaSagaRepository&lt;Guid&gt;&gt;().To&lt;AkkaSagaRepository&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IEventStore&lt;Guid&gt;&gt;().To&lt;MemoryCacheEventStore&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IEventBuilder&lt;Guid&gt;&gt;().To&lt;DefaultEventBuilder&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IEventDeserialiser&lt;Guid&gt;&gt;().To&lt;EventDeserialiser&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IEventPublisher&lt;Guid&gt;&gt;().To&lt;InProcessBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;<ref refid="interfaceCqrs_1_1Events_1_1IEventReceiver" kindref="compound">IEventReceiver&lt;Guid&gt;</ref>&gt;().To&lt;InProcessBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;ICorrelationIdHelper&gt;().ToConstant(correlationIdHelper).InSingletonScope();</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IAkkaEventPublisher&lt;Guid&gt;&gt;().To&lt;AkkaEventBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IAkkaEventPublisherProxy&lt;Guid&gt;&gt;().To&lt;AkkaEventBusProxy&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IAkkaCommandSender&lt;Guid&gt;&gt;().To&lt;AkkaCommandBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;<ref refid="interfaceCqrs_1_1Bus_1_1ICommandHandlerRegistrar" kindref="compound">ICommandHandlerRegistrar</ref>&gt;().To&lt;AkkaCommandBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;<ref refid="interfaceCqrs_1_1Bus_1_1IEventHandlerRegistrar" kindref="compound">IEventHandlerRegistrar</ref>&gt;().To&lt;AkkaEventBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;ICommandSender&lt;Guid&gt;&gt;().To&lt;InProcessBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;ICommandPublisher&lt;Guid&gt;&gt;().To&lt;InProcessBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;<ref refid="interfaceCqrs_1_1Commands_1_1ICommandReceiver" kindref="compound">ICommandReceiver&lt;Guid&gt;</ref>&gt;().To&lt;InProcessBus&lt;Guid&gt;&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;<ref refid="interfaceCqrs_1_1Configuration_1_1IConfigurationManager" kindref="compound">IConfigurationManager</ref>&gt;().ToConstant(configurationManager).InSingletonScope();</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;<ref refid="interfaceCqrs_1_1Bus_1_1IBusHelper" kindref="compound">IBusHelper</ref>&gt;().ToConstant(busHelper).InSingletonScope();</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IAuthenticationTokenHelper&lt;Guid&gt;&gt;().To&lt;<ref refid="classCqrs_1_1Authentication_1_1AuthenticationTokenHelper" kindref="compound">AuthenticationTokenHelper&lt;Guid&gt;</ref>&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kernel.Bind&lt;IContextItemCollectionFactory&gt;().To&lt;WebContextItemCollectionFactory&gt;().InSingletonScope();</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AkkaNinjectDependencyResolver.Start(kernel);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>dependencyResolver<sp/>=<sp/>(<ref refid="classCqrs_1_1Ninject_1_1Akka_1_1AkkaNinjectDependencyResolver" kindref="compound">AkkaNinjectDependencyResolver</ref>)<ref refid="classCqrs_1_1Ninject_1_1Configuration_1_1NinjectDependencyResolver" kindref="compound">NinjectDependencyResolver</ref>.<ref refid="classCqrs_1_1Ninject_1_1Configuration_1_1NinjectDependencyResolver_a2a8ebdf55ecac9eccccc237d422a3f31_1a2a8ebdf55ecac9eccccc237d422a3f31" kindref="member">Current</ref>;</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>commandBus<sp/>=<sp/>dependencyResolver.<ref refid="interfaceCqrs_1_1Configuration_1_1IDependencyResolver_aa455096b7b94fc1d64904bc67830ec06_1aa455096b7b94fc1d64904bc67830ec06" kindref="member">Resolve</ref>&lt;<ref refid="interfaceCqrs_1_1Bus_1_1ICommandHandlerRegistrar" kindref="compound">ICommandHandlerRegistrar</ref>&gt;();</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>eventBus<sp/>=<sp/>dependencyResolver.Resolve&lt;<ref refid="interfaceCqrs_1_1Bus_1_1IEventHandlerRegistrar" kindref="compound">IEventHandlerRegistrar</ref>&gt;();</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>inProcessBus<sp/>=<sp/>dependencyResolver.Resolve&lt;InProcessBus&lt;Guid&gt;&gt;();</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>commandBusProxy<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>AkkaCommandBusProxy&lt;Guid&gt;(dependencyResolver,<sp/>correlationIdHelper,<sp/>dependencyResolver.Resolve&lt;IAuthenticationTokenHelper&lt;Guid&gt;&gt;());</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Commands<sp/>handled<sp/>by<sp/>Akka.net</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>commandBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1SayHelloWorldCommand" kindref="compound">SayHelloWorldCommand</ref>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1Handlers_1_1SayHelloWorldCommandHandler" kindref="compound">SayHelloWorldCommandHandler</ref>(dependencyResolver).Handle);</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>commandBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1ReplyToHelloWorldCommand" kindref="compound">ReplyToHelloWorldCommand</ref>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1Handlers_1_1ReplyToHelloWorldCommandHandler" kindref="compound">ReplyToHelloWorldCommandHandler</ref>(dependencyResolver).Handle);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>commandBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1EndConversationCommand" kindref="compound">EndConversationCommand</ref>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1Handlers_1_1EndConversationCommandHandler" kindref="compound">EndConversationCommandHandler</ref>(dependencyResolver).Handle);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Commands<sp/>handled<sp/>in<sp/>process</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inProcessBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1UpdateCompletedConversationReportCommand" kindref="compound">UpdateCompletedConversationReportCommand</ref>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Commands_1_1Handlers_1_1UpdateCompletedConversationReportCommandHandler" kindref="compound">UpdateCompletedConversationReportCommandHandler</ref>(dependencyResolver).Handle);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Events<sp/>in<sp/>process</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inProcessBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1HelloWorldSaid" kindref="compound">HelloWorldSaid</ref>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1Handlers_1_1HelloWorldSaidEventHandler" kindref="compound">HelloWorldSaidEventHandler</ref>(dependencyResolver.Resolve&lt;IAkkaCommandSender&lt;Guid&gt;&gt;()).Handle);</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inProcessBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1ConversationEnded" kindref="compound">ConversationEnded</ref>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1Handlers_1_1ConversationEndedEventHandler" kindref="compound">ConversationEndedEventHandler</ref>(dependencyResolver.Resolve&lt;IAkkaCommandSender&lt;Guid&gt;&gt;()).Handle);</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>events<sp/>handled<sp/>by<sp/>Akka.net</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eventBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1HelloWorldRepliedTo" kindref="compound">HelloWorldRepliedTo</ref>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1Handlers_1_1HelloWorldRepliedToEventHandler" kindref="compound">HelloWorldRepliedToEventHandler</ref>(dependencyResolver).Handle);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eventBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1HelloWorldRepliedTo" kindref="compound">HelloWorldRepliedTo</ref>&gt;(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1Handlers_1_1HelloWorldRepliedToSendEndConversationCommandEventHandler" kindref="compound">HelloWorldRepliedToSendEndConversationCommandEventHandler</ref>(dependencyResolver).Handle);</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>var<sp/>handler<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Sagas_1_1ConversationReportProcessManagerEventHandlers" kindref="compound">ConversationReportProcessManagerEventHandlers</ref>(dependencyResolver);</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eventBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1HelloWorldSaid" kindref="compound">HelloWorldSaid</ref>&gt;(handler.Handle);</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eventBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1ConversationEnded" kindref="compound">ConversationEnded</ref>&gt;(handler.Handle);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eventBus.RegisterHandler&lt;<ref refid="classCqrs_1_1Akka_1_1Tests_1_1Unit_1_1Events_1_1HelloWorldRepliedTo" kindref="compound">HelloWorldRepliedTo</ref>&gt;(handler.Handle);</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Step1Reached.Add(correlationId,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Step2Reached.Add(correlationId,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Step3Reached.Add(correlationId,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Step4Reached.Add(correlationId,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FinalCommandReached.Add(correlationId,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Act</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>commandBusProxy.Send(command);</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Assert</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SpinWait.SpinUntil</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>()<sp/>=&gt;<sp/></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Step1Reached[correlationId]<sp/>&amp;&amp;<sp/></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Step2Reached[correlationId]<sp/>&amp;&amp;<sp/></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Step3Reached[correlationId]<sp/>&amp;&amp;<sp/></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Step4Reached[correlationId]<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FinalCommandReached[correlationId]</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AkkaNinjectDependencyResolver.Stop();</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="131"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/mnt/c/code/git/cqrs/Framework/Akka.Net/Cqrs.Akka.Tests.Unit/AkkaUnitTests.cs"/>
  </compounddef>
</doxygen>
