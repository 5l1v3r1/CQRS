\hypertarget{classCqrs_1_1Domain_1_1AggregateRoot}{}\doxysection{Cqrs.\+Domain.\+Aggregate\+Root$<$ T\+Authentication\+Token $>$ Class Template Reference}
\label{classCqrs_1_1Domain_1_1AggregateRoot}\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}


A larger unit of encapsulation than just a class. Every transaction is scoped to a single aggregate. The lifetimes of the components of an aggregate are bounded by the lifetime of the entire aggregate.  


Inheritance diagram for Cqrs.\+Domain.\+Aggregate\+Root$<$ T\+Authentication\+Token $>$\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.822126cm]{classCqrs_1_1Domain_1_1AggregateRoot}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
I\+Enumerable$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$ $>$ \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_a625e885ec7885a686f729ed1efe3a8fa_a625e885ec7885a686f729ed1efe3a8fa}{Get\+Uncommitted\+Changes}} ()
\begin{DoxyCompactList}\small\item\em Get all applied changes that haven\textquotesingle{}t yet been committed. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_adab968b830e186cb832583910bf6f3a6_adab968b830e186cb832583910bf6f3a6}{Mark\+Changes\+As\+Committed}} ()
\begin{DoxyCompactList}\small\item\em Mark all applied changes as committed, increment \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_a15f351663975c1d8e2cdc37b8c4d970f_a15f351663975c1d8e2cdc37b8c4d970f}{Version}} and flush the \mbox{\hyperlink{}{internal collection of changes}}. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_aec873ad6e4c98309cad2d9f1c534aebb_aec873ad6e4c98309cad2d9f1c534aebb}{Load\+From\+History}} (I\+Enumerable$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$ history)
\begin{DoxyCompactList}\small\item\em Apply all the \mbox{\hyperlink{}{events}} in {\itshape history}  using event replay to this instance. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_a1db2322dd7442e1e0c3c07332124eb2f_a1db2322dd7442e1e0c3c07332124eb2f}{Aggregate\+Root}} ()
\begin{DoxyCompactList}\small\item\em Instantiates a new instance of \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_a1db2322dd7442e1e0c3c07332124eb2f_a1db2322dd7442e1e0c3c07332124eb2f}{Aggregate\+Root$<$\+T\+Authentication\+Token$>$}}. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_adde40f553bdfcac309b3785751c7d3fc_adde40f553bdfcac309b3785751c7d3fc}{Initialise}} ()
\begin{DoxyCompactList}\small\item\em Initialise any properties \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_a7e299b13c7556731e52670aa6d782296_a7e299b13c7556731e52670aa6d782296}{Apply\+Change}} (\mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$ @event)
\begin{DoxyCompactList}\small\item\em Call the \char`\"{}\+Apply\char`\"{} method with a signature matching the provided {\itshape event}  without using event replay to this instance. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_aaf87b883f3f89addff957c7071a67203_aaf87b883f3f89addff957c7071a67203}{Apply\+Changes}} (I\+Enumerable$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$ events)
\begin{DoxyCompactList}\small\item\em Call the \char`\"{}\+Apply\char`\"{} method with a signature matching each I\+Event$<$\+T\+Authentication\+Token$>$ in the provided {\itshape events}  without using event replay to this instance. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Properties}
\begin{DoxyCompactItemize}
\item 
Guid \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_ab84d521c8c3bffd3c2e58959984d1e88_ab84d521c8c3bffd3c2e58959984d1e88}{Id}}\hspace{0.3cm}{\ttfamily  \mbox{[}get, protected set\mbox{]}}
\begin{DoxyCompactList}\small\item\em The identifier of this I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_a15f351663975c1d8e2cdc37b8c4d970f_a15f351663975c1d8e2cdc37b8c4d970f}{Version}}\hspace{0.3cm}{\ttfamily  \mbox{[}get, protected set\mbox{]}}
\begin{DoxyCompactList}\small\item\em The current version of this I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A larger unit of encapsulation than just a class. Every transaction is scoped to a single aggregate. The lifetimes of the components of an aggregate are bounded by the lifetime of the entire aggregate. 

Concretely, an aggregate will handle commands, apply events, and have a state model encapsulated within it that allows it to implement the required command validation, thus upholding the invariants (business rules) of the aggregate.

Why is the use of G\+U\+ID as I\+Ds a good practice?

Because they are (reasonably) globally unique, and can be generated either by the server or by the client. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_a1db2322dd7442e1e0c3c07332124eb2f_a1db2322dd7442e1e0c3c07332124eb2f}\label{classCqrs_1_1Domain_1_1AggregateRoot_a1db2322dd7442e1e0c3c07332124eb2f_a1db2322dd7442e1e0c3c07332124eb2f}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!AggregateRoot@{AggregateRoot}}
\index{AggregateRoot@{AggregateRoot}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{AggregateRoot()}{AggregateRoot()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.\mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Aggregate\+Root}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



Instantiates a new instance of \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_a1db2322dd7442e1e0c3c07332124eb2f_a1db2322dd7442e1e0c3c07332124eb2f}{Aggregate\+Root$<$\+T\+Authentication\+Token$>$}}. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_a7e299b13c7556731e52670aa6d782296_a7e299b13c7556731e52670aa6d782296}\label{classCqrs_1_1Domain_1_1AggregateRoot_a7e299b13c7556731e52670aa6d782296_a7e299b13c7556731e52670aa6d782296}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!ApplyChange@{ApplyChange}}
\index{ApplyChange@{ApplyChange}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{ApplyChange()}{ApplyChange()}}
{\footnotesize\ttfamily virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.Apply\+Change (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$ @}]{event }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Call the \char`\"{}\+Apply\char`\"{} method with a signature matching the provided {\itshape event}  without using event replay to this instance. 

This means a method named \char`\"{}\+Apply\char`\"{}, with return type void and one parameter must exist to be applied. If no method exists, nothing is applied The parameter type must match exactly the Type of the provided {\itshape event} . \mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_aaf87b883f3f89addff957c7071a67203_aaf87b883f3f89addff957c7071a67203}\label{classCqrs_1_1Domain_1_1AggregateRoot_aaf87b883f3f89addff957c7071a67203_aaf87b883f3f89addff957c7071a67203}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!ApplyChanges@{ApplyChanges}}
\index{ApplyChanges@{ApplyChanges}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{ApplyChanges()}{ApplyChanges()}}
{\footnotesize\ttfamily virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.Apply\+Changes (\begin{DoxyParamCaption}\item[{I\+Enumerable$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$}]{events }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Call the \char`\"{}\+Apply\char`\"{} method with a signature matching each I\+Event$<$\+T\+Authentication\+Token$>$ in the provided {\itshape events}  without using event replay to this instance. 

This means a method named \char`\"{}\+Apply\char`\"{}, with return type void and one parameter must exist to be applied. If no method exists, nothing is applied The parameter type must match exactly the Type of the I\+Event$<$\+T\+Authentication\+Token$>$ in the provided {\itshape events} . \mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_a625e885ec7885a686f729ed1efe3a8fa_a625e885ec7885a686f729ed1efe3a8fa}\label{classCqrs_1_1Domain_1_1AggregateRoot_a625e885ec7885a686f729ed1efe3a8fa_a625e885ec7885a686f729ed1efe3a8fa}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!GetUncommittedChanges@{GetUncommittedChanges}}
\index{GetUncommittedChanges@{GetUncommittedChanges}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{GetUncommittedChanges()}{GetUncommittedChanges()}}
{\footnotesize\ttfamily I\+Enumerable$<$\mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$T\+Authentication\+Token$>$ $>$ \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.Get\+Uncommitted\+Changes (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get all applied changes that haven\textquotesingle{}t yet been committed. 



Implements \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRoot_a22fda414613f5ac0d4371554d7d6473b_a22fda414613f5ac0d4371554d7d6473b}{Cqrs.\+Domain.\+I\+Aggregate\+Root$<$ T\+Authentication\+Token $>$}}.

\mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_adde40f553bdfcac309b3785751c7d3fc_adde40f553bdfcac309b3785751c7d3fc}\label{classCqrs_1_1Domain_1_1AggregateRoot_adde40f553bdfcac309b3785751c7d3fc_adde40f553bdfcac309b3785751c7d3fc}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!Initialise@{Initialise}}
\index{Initialise@{Initialise}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{Initialise()}{Initialise()}}
{\footnotesize\ttfamily virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.Initialise (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Initialise any properties 

\mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_aec873ad6e4c98309cad2d9f1c534aebb_aec873ad6e4c98309cad2d9f1c534aebb}\label{classCqrs_1_1Domain_1_1AggregateRoot_aec873ad6e4c98309cad2d9f1c534aebb_aec873ad6e4c98309cad2d9f1c534aebb}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!LoadFromHistory@{LoadFromHistory}}
\index{LoadFromHistory@{LoadFromHistory}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{LoadFromHistory()}{LoadFromHistory()}}
{\footnotesize\ttfamily virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.Load\+From\+History (\begin{DoxyParamCaption}\item[{I\+Enumerable$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$}]{history }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Apply all the \mbox{\hyperlink{}{events}} in {\itshape history}  using event replay to this instance. 



Implements \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRoot_afe9329ee26ae68613059189ca64dfe60_afe9329ee26ae68613059189ca64dfe60}{Cqrs.\+Domain.\+I\+Aggregate\+Root$<$ T\+Authentication\+Token $>$}}.

\mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_adab968b830e186cb832583910bf6f3a6_adab968b830e186cb832583910bf6f3a6}\label{classCqrs_1_1Domain_1_1AggregateRoot_adab968b830e186cb832583910bf6f3a6_adab968b830e186cb832583910bf6f3a6}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!MarkChangesAsCommitted@{MarkChangesAsCommitted}}
\index{MarkChangesAsCommitted@{MarkChangesAsCommitted}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{MarkChangesAsCommitted()}{MarkChangesAsCommitted()}}
{\footnotesize\ttfamily virtual void \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.Mark\+Changes\+As\+Committed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Mark all applied changes as committed, increment \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot_a15f351663975c1d8e2cdc37b8c4d970f_a15f351663975c1d8e2cdc37b8c4d970f}{Version}} and flush the \mbox{\hyperlink{}{internal collection of changes}}. 



Implements \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRoot_af31116870bbf6566b3eec0b8bc02c6de_af31116870bbf6566b3eec0b8bc02c6de}{Cqrs.\+Domain.\+I\+Aggregate\+Root$<$ T\+Authentication\+Token $>$}}.



\doxysubsection{Property Documentation}
\mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_ab84d521c8c3bffd3c2e58959984d1e88_ab84d521c8c3bffd3c2e58959984d1e88}\label{classCqrs_1_1Domain_1_1AggregateRoot_ab84d521c8c3bffd3c2e58959984d1e88_ab84d521c8c3bffd3c2e58959984d1e88}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!Id@{Id}}
\index{Id@{Id}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{Id}{Id}}
{\footnotesize\ttfamily Guid \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.Id\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [protected set]}}



The identifier of this I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$. 

\mbox{\Hypertarget{classCqrs_1_1Domain_1_1AggregateRoot_a15f351663975c1d8e2cdc37b8c4d970f_a15f351663975c1d8e2cdc37b8c4d970f}\label{classCqrs_1_1Domain_1_1AggregateRoot_a15f351663975c1d8e2cdc37b8c4d970f_a15f351663975c1d8e2cdc37b8c4d970f}} 
\index{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}!Version@{Version}}
\index{Version@{Version}!Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$@{Cqrs.Domain.AggregateRoot$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{Version}{Version}}
{\footnotesize\ttfamily int \mbox{\hyperlink{classCqrs_1_1Domain_1_1AggregateRoot}{Cqrs.\+Domain.\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$.Version\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [protected set]}}



The current version of this I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$. 

