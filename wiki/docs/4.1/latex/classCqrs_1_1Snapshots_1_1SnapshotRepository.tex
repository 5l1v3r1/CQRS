\hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository}{}\doxysection{Cqrs.\+Snapshots.\+Snapshot\+Repository$<$ T\+Authentication\+Token $>$ Class Template Reference}
\label{classCqrs_1_1Snapshots_1_1SnapshotRepository}\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}


Provides basic repository methods for operations with instances of I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ utilising \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1Snapshot}{snapshots}} for optimised rehydration.  


Inheritance diagram for Cqrs.\+Snapshots.\+Snapshot\+Repository$<$ T\+Authentication\+Token $>$\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classCqrs_1_1Snapshots_1_1SnapshotRepository}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_afb7a64a747064d1f1fa1f58e36d05d78_afb7a64a747064d1f1fa1f58e36d05d78}{Snapshot\+Repository}} (\mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore}{I\+Snapshot\+Store}} snapshot\+Store, \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStrategy}{I\+Snapshot\+Strategy}}$<$ T\+Authentication\+Token $>$ snapshot\+Strategy, \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRepository}{I\+Aggregate\+Repository}}$<$ T\+Authentication\+Token $>$ repository, \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEventStore}{I\+Event\+Store}}$<$ T\+Authentication\+Token $>$ event\+Store, \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1Factories_1_1IAggregateFactory}{I\+Aggregate\+Factory}} aggregate\+Factory)
\begin{DoxyCompactList}\small\item\em Instantiates a new instance of \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_afb7a64a747064d1f1fa1f58e36d05d78_afb7a64a747064d1f1fa1f58e36d05d78}{Snapshot\+Repository$<$\+T\+Authentication\+Token$>$}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_aac1a574562f8c6134d02a44cd10b8afa_aac1a574562f8c6134d02a44cd10b8afa}{Save$<$ T\+Aggregate\+Root $>$}} (T\+Aggregate\+Root aggregate, int? expected\+Version=null)
\begin{DoxyCompactList}\small\item\em Calls \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a82ef7d630bd09e02b573658ab8d909dd_a82ef7d630bd09e02b573658ab8d909dd}{Try\+Make\+Snapshot}} then I\+Aggregate\+Repository$<$\+T\+Authentication\+Token$>$.\+Save$<$\+T\+Aggregate\+Root$>$ on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a64b1457cd45056fb7affd2aa8cd07d9e_a64b1457cd45056fb7affd2aa8cd07d9e}{Repository}}. \end{DoxyCompactList}\item 
T\+Aggregate\+Root \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_acdbea47afc87de1da613a6eff3ceef0f_acdbea47afc87de1da613a6eff3ceef0f}{Get$<$ T\+Aggregate\+Root $>$}} (Guid aggregate\+Id, I\+List$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$ events=null)
\begin{DoxyCompactList}\small\item\em Retrieves an I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ of type {\itshape T\+Aggregate\+Root} , First using \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a1328c103474b2b394b7af61a24455a65_a1328c103474b2b394b7af61a24455a65}{Try\+Restore\+Aggregate\+From\+Snapshot$<$\+T\+Aggregate\+Root$>$}}, otherwise via I\+Aggregate\+Repository$<$\+T\+Authentication\+Token$>$.\+Get$<$\+T\+Aggregate\+Root$>$ on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a64b1457cd45056fb7affd2aa8cd07d9e_a64b1457cd45056fb7affd2aa8cd07d9e}{Repository}} Then does rehydration. \end{DoxyCompactList}\item 
T\+Aggregate\+Root \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_abdeca9aa6a5ce75e445888b2d0092a7d_abdeca9aa6a5ce75e445888b2d0092a7d}{Get\+To\+Version$<$ T\+Aggregate\+Root $>$}} (Guid aggregate\+Id, int version, I\+List$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$ events=null)
\begin{DoxyCompactList}\small\item\em Retrieves an I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ of type {\itshape T\+Aggregate\+Root}  up to and including the provided {\itshape version} . \end{DoxyCompactList}\item 
T\+Aggregate\+Root \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a2a55df8aa2b9a2058360ef8cdd4c1ebc_a2a55df8aa2b9a2058360ef8cdd4c1ebc}{Get\+To\+Date$<$ T\+Aggregate\+Root $>$}} (Guid aggregate\+Id, Date\+Time versioned\+Date, I\+List$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$ events=null)
\begin{DoxyCompactList}\small\item\em Retrieves an I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ of type {\itshape T\+Aggregate\+Root}  up to and including the provided {\itshape versioned\+Date} . \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual int \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a1328c103474b2b394b7af61a24455a65_a1328c103474b2b394b7af61a24455a65}{Try\+Restore\+Aggregate\+From\+Snapshot$<$ T\+Aggregate\+Root $>$}} (Guid id, T\+Aggregate\+Root aggregate)
\begin{DoxyCompactList}\small\item\em Calls \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStrategy_a02121821312c4ce2811b31eeaffabe51_a02121821312c4ce2811b31eeaffabe51}{I\+Snapshot\+Strategy$<$\+T\+Authentication\+Token$>$.\+Is\+Snapshotable}} on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a7d65b4df10d0b6f75c911a9b6d59b3ba_a7d65b4df10d0b6f75c911a9b6d59b3ba}{Snapshot\+Strategy}} If the {\itshape T\+Aggregate\+Root}  is snapshot-\/able \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore_ab7bd163fc9cd5c3bd5911679030be403_ab7bd163fc9cd5c3bd5911679030be403}{I\+Snapshot\+Store.\+Get$<$\+T\+Aggregate\+Root$>$}} is called on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotStore}{Snapshot\+Store}}. The Restore method is then called on \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a82ef7d630bd09e02b573658ab8d909dd_a82ef7d630bd09e02b573658ab8d909dd}{Try\+Make\+Snapshot}} (\mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRoot}{I\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$ aggregate, I\+Enumerable$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$ uncommitted\+Changes)
\begin{DoxyCompactList}\small\item\em Calls \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStrategy_aeb5fc714ec8a5b60219426f3aabc0f6c_aeb5fc714ec8a5b60219426f3aabc0f6c}{I\+Snapshot\+Strategy$<$\+T\+Authentication\+Token$>$.\+Should\+Make\+Snap\+Shot}} on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a7d65b4df10d0b6f75c911a9b6d59b3ba_a7d65b4df10d0b6f75c911a9b6d59b3ba}{Snapshot\+Strategy}} If the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ is snapshot-\/able \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotAggregateRoot_a30ec8fe3a09fec8238c5921c629a5ac1_a30ec8fe3a09fec8238c5921c629a5ac1}{Snapshot\+Aggregate\+Root$<$\+T\+Authentication\+Token,\+T\+Snapshot$>$.\+Get\+Snapshot}} is called The \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1Snapshot_a59c0a399430e5f4a1b27d999c3bb5d4f_a59c0a399430e5f4a1b27d999c3bb5d4f}{Snapshot.\+Version}} is calculated, finally \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore_a6e99c620115ce8a0648a83bf2ce05527_a6e99c620115ce8a0648a83bf2ce05527}{I\+Snapshot\+Store.\+Save}} is called on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotStore}{Snapshot\+Store}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Properties}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore}{I\+Snapshot\+Store}} \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_aba01e9f20eb41e6f3e4476a7f3182275_aba01e9f20eb41e6f3e4476a7f3182275}{Snapshot\+Store}}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\begin{DoxyCompactList}\small\item\em Gets or sets the \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore}{I\+Snapshot\+Store}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStrategy}{I\+Snapshot\+Strategy}}$<$ T\+Authentication\+Token $>$ \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a7d65b4df10d0b6f75c911a9b6d59b3ba_a7d65b4df10d0b6f75c911a9b6d59b3ba}{Snapshot\+Strategy}}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\begin{DoxyCompactList}\small\item\em Gets or sets the I\+Snapshot\+Strategy$<$\+T\+Authentication\+Token$>$. \end{DoxyCompactList}\item 
\mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRepository}{I\+Aggregate\+Repository}}$<$ T\+Authentication\+Token $>$ \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a64b1457cd45056fb7affd2aa8cd07d9e_a64b1457cd45056fb7affd2aa8cd07d9e}{Repository}}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\begin{DoxyCompactList}\small\item\em Gets or sets the I\+Aggregate\+Repository$<$\+T\+Authentication\+Token$>$. \end{DoxyCompactList}\item 
\mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEventStore}{I\+Event\+Store}}$<$ T\+Authentication\+Token $>$ \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a34f46341da207beab43bb96b20514976_a34f46341da207beab43bb96b20514976}{Event\+Store}}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\begin{DoxyCompactList}\small\item\em Gets or sets the I\+Event\+Store$<$\+T\+Authentication\+Token$>$. \end{DoxyCompactList}\item 
\mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1Factories_1_1IAggregateFactory}{I\+Aggregate\+Factory}} \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a833748fa79fd234067b61927c57bc60f_a833748fa79fd234067b61927c57bc60f}{Aggregate\+Factory}}\hspace{0.3cm}{\ttfamily  \mbox{[}get\mbox{]}}
\begin{DoxyCompactList}\small\item\em Gets or sets the I\+Aggregate\+Factory. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Provides basic repository methods for operations with instances of I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ utilising \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1Snapshot}{snapshots}} for optimised rehydration. 


\begin{DoxyTemplParams}{Template Parameters}
{\em T\+Authentication\+Token} & The Type of authentication token.\\
\hline
\end{DoxyTemplParams}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_afb7a64a747064d1f1fa1f58e36d05d78_afb7a64a747064d1f1fa1f58e36d05d78}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_afb7a64a747064d1f1fa1f58e36d05d78_afb7a64a747064d1f1fa1f58e36d05d78}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!SnapshotRepository@{SnapshotRepository}}
\index{SnapshotRepository@{SnapshotRepository}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{SnapshotRepository()}{SnapshotRepository()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.\mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Snapshot\+Repository}} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore}{I\+Snapshot\+Store}}}]{snapshot\+Store,  }\item[{\mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStrategy}{I\+Snapshot\+Strategy}}$<$ T\+Authentication\+Token $>$}]{snapshot\+Strategy,  }\item[{\mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRepository}{I\+Aggregate\+Repository}}$<$ T\+Authentication\+Token $>$}]{repository,  }\item[{\mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEventStore}{I\+Event\+Store}}$<$ T\+Authentication\+Token $>$}]{event\+Store,  }\item[{\mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1Factories_1_1IAggregateFactory}{I\+Aggregate\+Factory}}}]{aggregate\+Factory }\end{DoxyParamCaption})}



Instantiates a new instance of \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_afb7a64a747064d1f1fa1f58e36d05d78_afb7a64a747064d1f1fa1f58e36d05d78}{Snapshot\+Repository$<$\+T\+Authentication\+Token$>$}}. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_acdbea47afc87de1da613a6eff3ceef0f_acdbea47afc87de1da613a6eff3ceef0f}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_acdbea47afc87de1da613a6eff3ceef0f_acdbea47afc87de1da613a6eff3ceef0f}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!Get$<$ TAggregateRoot $>$@{Get$<$ TAggregateRoot $>$}}
\index{Get$<$ TAggregateRoot $>$@{Get$<$ TAggregateRoot $>$}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{Get$<$ TAggregateRoot $>$()}{Get< TAggregateRoot >()}}
{\footnotesize\ttfamily T\+Aggregate\+Root \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.Get$<$ T\+Aggregate\+Root $>$ (\begin{DoxyParamCaption}\item[{Guid}]{aggregate\+Id,  }\item[{I\+List$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$}]{events = {\ttfamily null} }\end{DoxyParamCaption})}



Retrieves an I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ of type {\itshape T\+Aggregate\+Root} , First using \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a1328c103474b2b394b7af61a24455a65_a1328c103474b2b394b7af61a24455a65}{Try\+Restore\+Aggregate\+From\+Snapshot$<$\+T\+Aggregate\+Root$>$}}, otherwise via I\+Aggregate\+Repository$<$\+T\+Authentication\+Token$>$.\+Get$<$\+T\+Aggregate\+Root$>$ on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a64b1457cd45056fb7affd2aa8cd07d9e_a64b1457cd45056fb7affd2aa8cd07d9e}{Repository}} Then does rehydration. 


\begin{DoxyTemplParams}{Template Parameters}
{\em T\+Aggregate\+Root} & The Type of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$.\\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em aggregate\+Id} & The identifier of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ to retrieve.\\
\hline
{\em events} & A collection of I\+Event$<$\+T\+Authentication\+Token$>$ to replay on the retrieved I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$. If null, the I\+Event\+Store$<$\+T\+Authentication\+Token$>$ will be used to retrieve a list of I\+Event$<$\+T\+Authentication\+Token$>$ for you. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRepository_a890633fddbd05bd3b9e9968a2de095bb_a890633fddbd05bd3b9e9968a2de095bb}{Cqrs.\+Domain.\+I\+Aggregate\+Repository$<$ T\+Authentication\+Token $>$}}.

\begin{Desc}
\item[Type Constraints]\begin{description}
\item[{\em T\+Aggregate\+Root} : {\em I\+Aggregate\+Root$<$T\+Authentication\+Token$>$}]\end{description}
\end{Desc}
\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_a2a55df8aa2b9a2058360ef8cdd4c1ebc_a2a55df8aa2b9a2058360ef8cdd4c1ebc}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_a2a55df8aa2b9a2058360ef8cdd4c1ebc_a2a55df8aa2b9a2058360ef8cdd4c1ebc}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!GetToDate$<$ TAggregateRoot $>$@{GetToDate$<$ TAggregateRoot $>$}}
\index{GetToDate$<$ TAggregateRoot $>$@{GetToDate$<$ TAggregateRoot $>$}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{GetToDate$<$ TAggregateRoot $>$()}{GetToDate< TAggregateRoot >()}}
{\footnotesize\ttfamily T\+Aggregate\+Root \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.Get\+To\+Date$<$ T\+Aggregate\+Root $>$ (\begin{DoxyParamCaption}\item[{Guid}]{aggregate\+Id,  }\item[{Date\+Time}]{versioned\+Date,  }\item[{I\+List$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$}]{events = {\ttfamily null} }\end{DoxyParamCaption})}



Retrieves an I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ of type {\itshape T\+Aggregate\+Root}  up to and including the provided {\itshape versioned\+Date} . 


\begin{DoxyTemplParams}{Template Parameters}
{\em T\+Aggregate\+Root} & The Type of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$.\\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em aggregate\+Id} & The identifier of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ to retrieve.\\
\hline
{\em versioned\+Date} & Load events up-\/to and including from this Date\+Time\\
\hline
{\em events} & A collection of I\+Event$<$\+T\+Authentication\+Token$>$ to replay on the retrieved I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$. If null, the I\+Event\+Store$<$\+T\+Authentication\+Token$>$ will be used to retrieve a list of I\+Event$<$\+T\+Authentication\+Token$>$ for you. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRepository_a32308a27ce03c5d406e16b17430dd040_a32308a27ce03c5d406e16b17430dd040}{Cqrs.\+Domain.\+I\+Aggregate\+Repository$<$ T\+Authentication\+Token $>$}}.

\begin{Desc}
\item[Type Constraints]\begin{description}
\item[{\em T\+Aggregate\+Root} : {\em I\+Aggregate\+Root$<$T\+Authentication\+Token$>$}]\end{description}
\end{Desc}
\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_abdeca9aa6a5ce75e445888b2d0092a7d_abdeca9aa6a5ce75e445888b2d0092a7d}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_abdeca9aa6a5ce75e445888b2d0092a7d_abdeca9aa6a5ce75e445888b2d0092a7d}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!GetToVersion$<$ TAggregateRoot $>$@{GetToVersion$<$ TAggregateRoot $>$}}
\index{GetToVersion$<$ TAggregateRoot $>$@{GetToVersion$<$ TAggregateRoot $>$}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{GetToVersion$<$ TAggregateRoot $>$()}{GetToVersion< TAggregateRoot >()}}
{\footnotesize\ttfamily T\+Aggregate\+Root \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.Get\+To\+Version$<$ T\+Aggregate\+Root $>$ (\begin{DoxyParamCaption}\item[{Guid}]{aggregate\+Id,  }\item[{int}]{version,  }\item[{I\+List$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$}]{events = {\ttfamily null} }\end{DoxyParamCaption})}



Retrieves an I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ of type {\itshape T\+Aggregate\+Root}  up to and including the provided {\itshape version} . 


\begin{DoxyTemplParams}{Template Parameters}
{\em T\+Aggregate\+Root} & The Type of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$.\\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em aggregate\+Id} & The identifier of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ to retrieve.\\
\hline
{\em version} & Load events up-\/to and including from this version\\
\hline
{\em events} & A collection of I\+Event$<$\+T\+Authentication\+Token$>$ to replay on the retrieved I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$. If null, the I\+Event\+Store$<$\+T\+Authentication\+Token$>$ will be used to retrieve a list of I\+Event$<$\+T\+Authentication\+Token$>$ for you. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRepository_aa0d6b4b9b117357e1676cae829fe2a5c_aa0d6b4b9b117357e1676cae829fe2a5c}{Cqrs.\+Domain.\+I\+Aggregate\+Repository$<$ T\+Authentication\+Token $>$}}.

\begin{Desc}
\item[Type Constraints]\begin{description}
\item[{\em T\+Aggregate\+Root} : {\em I\+Aggregate\+Root$<$T\+Authentication\+Token$>$}]\end{description}
\end{Desc}
\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_aac1a574562f8c6134d02a44cd10b8afa_aac1a574562f8c6134d02a44cd10b8afa}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_aac1a574562f8c6134d02a44cd10b8afa_aac1a574562f8c6134d02a44cd10b8afa}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!Save$<$ TAggregateRoot $>$@{Save$<$ TAggregateRoot $>$}}
\index{Save$<$ TAggregateRoot $>$@{Save$<$ TAggregateRoot $>$}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{Save$<$ TAggregateRoot $>$()}{Save< TAggregateRoot >()}}
{\footnotesize\ttfamily void \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.Save$<$ T\+Aggregate\+Root $>$ (\begin{DoxyParamCaption}\item[{T\+Aggregate\+Root}]{aggregate,  }\item[{int?}]{expected\+Version = {\ttfamily null} }\end{DoxyParamCaption})}



Calls \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a82ef7d630bd09e02b573658ab8d909dd_a82ef7d630bd09e02b573658ab8d909dd}{Try\+Make\+Snapshot}} then I\+Aggregate\+Repository$<$\+T\+Authentication\+Token$>$.\+Save$<$\+T\+Aggregate\+Root$>$ on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a64b1457cd45056fb7affd2aa8cd07d9e_a64b1457cd45056fb7affd2aa8cd07d9e}{Repository}}. 


\begin{DoxyTemplParams}{Template Parameters}
{\em T\+Aggregate\+Root} & The Type of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$.\\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em aggregate} & The I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ to save and persist.\\
\hline
{\em expected\+Version} & The version number the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ is expected to be at.\\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRepository_a306baf8aa6faabe893f93e5db5d3517d_a306baf8aa6faabe893f93e5db5d3517d}{Cqrs.\+Domain.\+I\+Aggregate\+Repository$<$ T\+Authentication\+Token $>$}}.

\begin{Desc}
\item[Type Constraints]\begin{description}
\item[{\em T\+Aggregate\+Root} : {\em I\+Aggregate\+Root$<$T\+Authentication\+Token$>$}]\end{description}
\end{Desc}
\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_a82ef7d630bd09e02b573658ab8d909dd_a82ef7d630bd09e02b573658ab8d909dd}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_a82ef7d630bd09e02b573658ab8d909dd_a82ef7d630bd09e02b573658ab8d909dd}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!TryMakeSnapshot@{TryMakeSnapshot}}
\index{TryMakeSnapshot@{TryMakeSnapshot}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{TryMakeSnapshot()}{TryMakeSnapshot()}}
{\footnotesize\ttfamily virtual void \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.Try\+Make\+Snapshot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRoot}{I\+Aggregate\+Root}}$<$ T\+Authentication\+Token $>$}]{aggregate,  }\item[{I\+Enumerable$<$ \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEvent}{I\+Event}}$<$ T\+Authentication\+Token $>$$>$}]{uncommitted\+Changes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Calls \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStrategy_aeb5fc714ec8a5b60219426f3aabc0f6c_aeb5fc714ec8a5b60219426f3aabc0f6c}{I\+Snapshot\+Strategy$<$\+T\+Authentication\+Token$>$.\+Should\+Make\+Snap\+Shot}} on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a7d65b4df10d0b6f75c911a9b6d59b3ba_a7d65b4df10d0b6f75c911a9b6d59b3ba}{Snapshot\+Strategy}} If the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ is snapshot-\/able \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotAggregateRoot_a30ec8fe3a09fec8238c5921c629a5ac1_a30ec8fe3a09fec8238c5921c629a5ac1}{Snapshot\+Aggregate\+Root$<$\+T\+Authentication\+Token,\+T\+Snapshot$>$.\+Get\+Snapshot}} is called The \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1Snapshot_a59c0a399430e5f4a1b27d999c3bb5d4f_a59c0a399430e5f4a1b27d999c3bb5d4f}{Snapshot.\+Version}} is calculated, finally \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore_a6e99c620115ce8a0648a83bf2ce05527_a6e99c620115ce8a0648a83bf2ce05527}{I\+Snapshot\+Store.\+Save}} is called on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotStore}{Snapshot\+Store}}. 


\begin{DoxyParams}{Parameters}
{\em aggregate} & The I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ to try and snapshot.\\
\hline
{\em uncommitted\+Changes} & A collection of uncommited changes to assess. If null the aggregate will be asked to provide them.\\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_a1328c103474b2b394b7af61a24455a65_a1328c103474b2b394b7af61a24455a65}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_a1328c103474b2b394b7af61a24455a65_a1328c103474b2b394b7af61a24455a65}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!TryRestoreAggregateFromSnapshot$<$ TAggregateRoot $>$@{TryRestoreAggregateFromSnapshot$<$ TAggregateRoot $>$}}
\index{TryRestoreAggregateFromSnapshot$<$ TAggregateRoot $>$@{TryRestoreAggregateFromSnapshot$<$ TAggregateRoot $>$}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{TryRestoreAggregateFromSnapshot$<$ TAggregateRoot $>$()}{TryRestoreAggregateFromSnapshot< TAggregateRoot >()}}
{\footnotesize\ttfamily virtual int \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.Try\+Restore\+Aggregate\+From\+Snapshot$<$ T\+Aggregate\+Root $>$ (\begin{DoxyParamCaption}\item[{Guid}]{id,  }\item[{T\+Aggregate\+Root}]{aggregate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Calls \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStrategy_a02121821312c4ce2811b31eeaffabe51_a02121821312c4ce2811b31eeaffabe51}{I\+Snapshot\+Strategy$<$\+T\+Authentication\+Token$>$.\+Is\+Snapshotable}} on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository_a7d65b4df10d0b6f75c911a9b6d59b3ba_a7d65b4df10d0b6f75c911a9b6d59b3ba}{Snapshot\+Strategy}} If the {\itshape T\+Aggregate\+Root}  is snapshot-\/able \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore_ab7bd163fc9cd5c3bd5911679030be403_ab7bd163fc9cd5c3bd5911679030be403}{I\+Snapshot\+Store.\+Get$<$\+T\+Aggregate\+Root$>$}} is called on \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotStore}{Snapshot\+Store}}. The Restore method is then called on 


\begin{DoxyTemplParams}{Template Parameters}
{\em T\+Aggregate\+Root} & The Type of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$.\\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em id} & The identifier of the I\+Aggregate\+Root$<$\+T\+Authentication\+Token$>$ to restore, since the {\itshape aggregate}  may be completely uninitialised.\\
\hline
{\em aggregate} & The {\itshape T\+Aggregate\+Root} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 if no restoration was made, otherwise version number the {\itshape T\+Aggregate\+Root}  was rehydrated to.
\end{DoxyReturn}


There may be more events after the snapshot that still need to rehydrated into the {\itshape T\+Aggregate\+Root}  after restoration.

\doxysubsection{Property Documentation}
\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_a833748fa79fd234067b61927c57bc60f_a833748fa79fd234067b61927c57bc60f}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_a833748fa79fd234067b61927c57bc60f_a833748fa79fd234067b61927c57bc60f}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!AggregateFactory@{AggregateFactory}}
\index{AggregateFactory@{AggregateFactory}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{AggregateFactory}{AggregateFactory}}
{\footnotesize\ttfamily \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1Factories_1_1IAggregateFactory}{I\+Aggregate\+Factory}} \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.\mbox{\hyperlink{classCqrs_1_1Domain_1_1Factories_1_1AggregateFactory}{Aggregate\+Factory}}\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [protected]}}



Gets or sets the I\+Aggregate\+Factory. 

\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_a34f46341da207beab43bb96b20514976_a34f46341da207beab43bb96b20514976}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_a34f46341da207beab43bb96b20514976_a34f46341da207beab43bb96b20514976}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!EventStore@{EventStore}}
\index{EventStore@{EventStore}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{EventStore}{EventStore}}
{\footnotesize\ttfamily \mbox{\hyperlink{interfaceCqrs_1_1Events_1_1IEventStore}{I\+Event\+Store}}$<$T\+Authentication\+Token$>$ \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.\mbox{\hyperlink{classCqrs_1_1Events_1_1EventStore}{Event\+Store}}\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [protected]}}



Gets or sets the I\+Event\+Store$<$\+T\+Authentication\+Token$>$. 

\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_a64b1457cd45056fb7affd2aa8cd07d9e_a64b1457cd45056fb7affd2aa8cd07d9e}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_a64b1457cd45056fb7affd2aa8cd07d9e_a64b1457cd45056fb7affd2aa8cd07d9e}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!Repository@{Repository}}
\index{Repository@{Repository}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{Repository}{Repository}}
{\footnotesize\ttfamily \mbox{\hyperlink{interfaceCqrs_1_1Domain_1_1IAggregateRepository}{I\+Aggregate\+Repository}}$<$T\+Authentication\+Token$>$ \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.Repository\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [protected]}}



Gets or sets the I\+Aggregate\+Repository$<$\+T\+Authentication\+Token$>$. 

\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_aba01e9f20eb41e6f3e4476a7f3182275_aba01e9f20eb41e6f3e4476a7f3182275}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_aba01e9f20eb41e6f3e4476a7f3182275_aba01e9f20eb41e6f3e4476a7f3182275}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!SnapshotStore@{SnapshotStore}}
\index{SnapshotStore@{SnapshotStore}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{SnapshotStore}{SnapshotStore}}
{\footnotesize\ttfamily \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore}{I\+Snapshot\+Store}} \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.\mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotStore}{Snapshot\+Store}}\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [protected]}}



Gets or sets the \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStore}{I\+Snapshot\+Store}}. 

\mbox{\Hypertarget{classCqrs_1_1Snapshots_1_1SnapshotRepository_a7d65b4df10d0b6f75c911a9b6d59b3ba_a7d65b4df10d0b6f75c911a9b6d59b3ba}\label{classCqrs_1_1Snapshots_1_1SnapshotRepository_a7d65b4df10d0b6f75c911a9b6d59b3ba_a7d65b4df10d0b6f75c911a9b6d59b3ba}} 
\index{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}!SnapshotStrategy@{SnapshotStrategy}}
\index{SnapshotStrategy@{SnapshotStrategy}!Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$@{Cqrs.Snapshots.SnapshotRepository$<$ TAuthenticationToken $>$}}
\doxysubsubsection{\texorpdfstring{SnapshotStrategy}{SnapshotStrategy}}
{\footnotesize\ttfamily \mbox{\hyperlink{interfaceCqrs_1_1Snapshots_1_1ISnapshotStrategy}{I\+Snapshot\+Strategy}}$<$T\+Authentication\+Token$>$ \mbox{\hyperlink{classCqrs_1_1Snapshots_1_1SnapshotRepository}{Cqrs.\+Snapshots.\+Snapshot\+Repository}}$<$ T\+Authentication\+Token $>$.Snapshot\+Strategy\hspace{0.3cm}{\ttfamily [get]}, {\ttfamily [protected]}}



Gets or sets the I\+Snapshot\+Strategy$<$\+T\+Authentication\+Token$>$. 

